<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>

<!--
<div class="td-toc"><nav id="TableOfContents"><div>
            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#OpticalElement">OpticalElement</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OpticalElement.__init__">OpticalElement</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.rotate_pitch_by">rotate_pitch_by</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.rotate_roll_by">rotate_roll_by</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.rotate_yaw_by">rotate_yaw_by</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.rotate_random_by">rotate_random_by</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.shift_along_normal">shift_along_normal</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.shift_along_major">shift_along_major</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.shift_along_cross">shift_along_cross</a>
                        </li>
                        <li>
                                <a class="function" href="#OpticalElement.shift_along_random">shift_along_random</a>
                        </li>
                </ul>

            </li>
    </ul>

</div></nav></div>
-->


<div class="pdoc">
                <section id="OpticalElement">
                            <input id="OpticalElement-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OpticalElement</span>:

                <label class="view-source-button" for="OpticalElement-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement-24"><a href="#OpticalElement-24"><span class="linenos"> 24</span></a><span class="k">class</span> <span class="nc">OpticalElement</span><span class="p">:</span>
</span><span id="OpticalElement-25"><a href="#OpticalElement-25"><span class="linenos"> 25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-26"><a href="#OpticalElement-26"><span class="linenos"> 26</span></a><span class="sd">    An optical element, to define the position and orientation of different optics in the &#39;lab-frame&#39;.</span>
</span><span id="OpticalElement-27"><a href="#OpticalElement-27"><span class="linenos"> 27</span></a>
</span><span id="OpticalElement-28"><a href="#OpticalElement-28"><span class="linenos"> 28</span></a><span class="sd">    Attributes</span>
</span><span id="OpticalElement-29"><a href="#OpticalElement-29"><span class="linenos"> 29</span></a><span class="sd">    ----------</span>
</span><span id="OpticalElement-30"><a href="#OpticalElement-30"><span class="linenos"> 30</span></a><span class="sd">        type : An instance of a class of optic, i.e. a Mirror and Mask.</span>
</span><span id="OpticalElement-31"><a href="#OpticalElement-31"><span class="linenos"> 31</span></a>
</span><span id="OpticalElement-32"><a href="#OpticalElement-32"><span class="linenos"> 32</span></a><span class="sd">        position : np.ndarray</span>
</span><span id="OpticalElement-33"><a href="#OpticalElement-33"><span class="linenos"> 33</span></a><span class="sd">            Coordinate vector of the optical element’s center point in the lab frame.</span>
</span><span id="OpticalElement-34"><a href="#OpticalElement-34"><span class="linenos"> 34</span></a><span class="sd">            What this center is, depends on the &#39;type&#39;, but it is generally the center of symmetry</span>
</span><span id="OpticalElement-35"><a href="#OpticalElement-35"><span class="linenos"> 35</span></a><span class="sd">            of the Support of the optic. It is marked by the point &#39;P&#39; in the drawings in the</span>
</span><span id="OpticalElement-36"><a href="#OpticalElement-36"><span class="linenos"> 36</span></a><span class="sd">            documentation of the Mirror-classes for example.</span>
</span><span id="OpticalElement-37"><a href="#OpticalElement-37"><span class="linenos"> 37</span></a>
</span><span id="OpticalElement-38"><a href="#OpticalElement-38"><span class="linenos"> 38</span></a><span class="sd">        normal : np.ndarray</span>
</span><span id="OpticalElement-39"><a href="#OpticalElement-39"><span class="linenos"> 39</span></a><span class="sd">            Lab-frame vector pointing against the direction that would be considered</span>
</span><span id="OpticalElement-40"><a href="#OpticalElement-40"><span class="linenos"> 40</span></a><span class="sd">            as normal incidence on the optical element.</span>
</span><span id="OpticalElement-41"><a href="#OpticalElement-41"><span class="linenos"> 41</span></a>
</span><span id="OpticalElement-42"><a href="#OpticalElement-42"><span class="linenos"> 42</span></a><span class="sd">        majoraxis : np.ndarray</span>
</span><span id="OpticalElement-43"><a href="#OpticalElement-43"><span class="linenos"> 43</span></a><span class="sd">            Lab-frame vector of another distinguished axis of non-rotationally symmetric optics,</span>
</span><span id="OpticalElement-44"><a href="#OpticalElement-44"><span class="linenos"> 44</span></a><span class="sd">            like the major axes of toroidal/elliptical mirrors or the off-axis direction of</span>
</span><span id="OpticalElement-45"><a href="#OpticalElement-45"><span class="linenos"> 45</span></a><span class="sd">            off-axis parabolas. This fixes the optical element’s rotation about &#39;normal&#39;.</span>
</span><span id="OpticalElement-46"><a href="#OpticalElement-46"><span class="linenos"> 46</span></a><span class="sd">            It is required to be perpendicular to &#39;normal&#39;, and is usually the x-axis in the</span>
</span><span id="OpticalElement-47"><a href="#OpticalElement-47"><span class="linenos"> 47</span></a><span class="sd">            optic&#39;s proper coordinate frame.</span>
</span><span id="OpticalElement-48"><a href="#OpticalElement-48"><span class="linenos"> 48</span></a>
</span><span id="OpticalElement-49"><a href="#OpticalElement-49"><span class="linenos"> 49</span></a><span class="sd">            What this &#39;majoraxis&#39; is, e.g. for the different kinds of mirrors, is illustrated</span>
</span><span id="OpticalElement-50"><a href="#OpticalElement-50"><span class="linenos"> 50</span></a><span class="sd">            in the documentation of the Mirror-classes.</span>
</span><span id="OpticalElement-51"><a href="#OpticalElement-51"><span class="linenos"> 51</span></a>
</span><span id="OpticalElement-52"><a href="#OpticalElement-52"><span class="linenos"> 52</span></a><span class="sd">            For pure p or s polarization, the light incidence plane should be the</span>
</span><span id="OpticalElement-53"><a href="#OpticalElement-53"><span class="linenos"> 53</span></a><span class="sd">            plane spanned by &#39;normal&#39; and &#39;majoraxis&#39;, so that the incidence angle is varied</span>
</span><span id="OpticalElement-54"><a href="#OpticalElement-54"><span class="linenos"> 54</span></a><span class="sd">            by rotating the optical element around the cross product &#39;normal&#39; x &#39;majoraxis&#39;.</span>
</span><span id="OpticalElement-55"><a href="#OpticalElement-55"><span class="linenos"> 55</span></a>
</span><span id="OpticalElement-56"><a href="#OpticalElement-56"><span class="linenos"> 56</span></a>
</span><span id="OpticalElement-57"><a href="#OpticalElement-57"><span class="linenos"> 57</span></a><span class="sd">    Methods</span>
</span><span id="OpticalElement-58"><a href="#OpticalElement-58"><span class="linenos"> 58</span></a><span class="sd">    ----------</span>
</span><span id="OpticalElement-59"><a href="#OpticalElement-59"><span class="linenos"> 59</span></a><span class="sd">        rotate_pitch_by(angle)</span>
</span><span id="OpticalElement-60"><a href="#OpticalElement-60"><span class="linenos"> 60</span></a>
</span><span id="OpticalElement-61"><a href="#OpticalElement-61"><span class="linenos"> 61</span></a><span class="sd">        rotate_roll_by(angle)</span>
</span><span id="OpticalElement-62"><a href="#OpticalElement-62"><span class="linenos"> 62</span></a>
</span><span id="OpticalElement-63"><a href="#OpticalElement-63"><span class="linenos"> 63</span></a><span class="sd">        rotate_yaw_by(angle)</span>
</span><span id="OpticalElement-64"><a href="#OpticalElement-64"><span class="linenos"> 64</span></a>
</span><span id="OpticalElement-65"><a href="#OpticalElement-65"><span class="linenos"> 65</span></a><span class="sd">        rotate_random_by(angle)</span>
</span><span id="OpticalElement-66"><a href="#OpticalElement-66"><span class="linenos"> 66</span></a>
</span><span id="OpticalElement-67"><a href="#OpticalElement-67"><span class="linenos"> 67</span></a><span class="sd">        shift_along_normal(distance)</span>
</span><span id="OpticalElement-68"><a href="#OpticalElement-68"><span class="linenos"> 68</span></a>
</span><span id="OpticalElement-69"><a href="#OpticalElement-69"><span class="linenos"> 69</span></a><span class="sd">        shift_along_major(distance)</span>
</span><span id="OpticalElement-70"><a href="#OpticalElement-70"><span class="linenos"> 70</span></a>
</span><span id="OpticalElement-71"><a href="#OpticalElement-71"><span class="linenos"> 71</span></a><span class="sd">        shift_along_cross(distance)</span>
</span><span id="OpticalElement-72"><a href="#OpticalElement-72"><span class="linenos"> 72</span></a>
</span><span id="OpticalElement-73"><a href="#OpticalElement-73"><span class="linenos"> 73</span></a><span class="sd">        shift_along_random(distance)</span>
</span><span id="OpticalElement-74"><a href="#OpticalElement-74"><span class="linenos"> 74</span></a>
</span><span id="OpticalElement-75"><a href="#OpticalElement-75"><span class="linenos"> 75</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="OpticalElement-76"><a href="#OpticalElement-76"><span class="linenos"> 76</span></a>
</span><span id="OpticalElement-77"><a href="#OpticalElement-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Position</span><span class="p">,</span> <span class="n">Normal</span><span class="p">,</span> <span class="n">MajorAxis</span><span class="p">):</span>
</span><span id="OpticalElement-78"><a href="#OpticalElement-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-79"><a href="#OpticalElement-79"><span class="linenos"> 79</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-80"><a href="#OpticalElement-80"><span class="linenos"> 80</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-81"><a href="#OpticalElement-81"><span class="linenos"> 81</span></a><span class="sd">            Type : Object of a Mirror or Mask-class</span>
</span><span id="OpticalElement-82"><a href="#OpticalElement-82"><span class="linenos"> 82</span></a>
</span><span id="OpticalElement-83"><a href="#OpticalElement-83"><span class="linenos"> 83</span></a><span class="sd">            Position : np.ndarray</span>
</span><span id="OpticalElement-84"><a href="#OpticalElement-84"><span class="linenos"> 84</span></a><span class="sd">                Coordinate vector of the optical element’s center point in the lab frame.</span>
</span><span id="OpticalElement-85"><a href="#OpticalElement-85"><span class="linenos"> 85</span></a><span class="sd">                What this center is, depends on the &#39;type&#39;, but it is generally the center of symmetry</span>
</span><span id="OpticalElement-86"><a href="#OpticalElement-86"><span class="linenos"> 86</span></a><span class="sd">                of the Support of the optic. It is marked by the point &#39;P&#39; in the drawings in the</span>
</span><span id="OpticalElement-87"><a href="#OpticalElement-87"><span class="linenos"> 87</span></a><span class="sd">                documentation of the Mirror-classes for example.</span>
</span><span id="OpticalElement-88"><a href="#OpticalElement-88"><span class="linenos"> 88</span></a>
</span><span id="OpticalElement-89"><a href="#OpticalElement-89"><span class="linenos"> 89</span></a><span class="sd">            Normal : np.ndarray</span>
</span><span id="OpticalElement-90"><a href="#OpticalElement-90"><span class="linenos"> 90</span></a><span class="sd">                Lab-frame vector pointing against the direction that would be considered</span>
</span><span id="OpticalElement-91"><a href="#OpticalElement-91"><span class="linenos"> 91</span></a><span class="sd">                as normal incidence on the optical element.</span>
</span><span id="OpticalElement-92"><a href="#OpticalElement-92"><span class="linenos"> 92</span></a>
</span><span id="OpticalElement-93"><a href="#OpticalElement-93"><span class="linenos"> 93</span></a><span class="sd">            MajorAxis : np.ndarray</span>
</span><span id="OpticalElement-94"><a href="#OpticalElement-94"><span class="linenos"> 94</span></a><span class="sd">                Lab-frame vector of another distinguished axis, of non-rotationally symmetric elements,</span>
</span><span id="OpticalElement-95"><a href="#OpticalElement-95"><span class="linenos"> 95</span></a><span class="sd">                like the major axes of toroidal/elliptical mirrors or the off-axis direction of off-axis</span>
</span><span id="OpticalElement-96"><a href="#OpticalElement-96"><span class="linenos"> 96</span></a><span class="sd">                parabolas. It is required to be perpendicular to &#39;normal&#39;, and is usually the x-axis in</span>
</span><span id="OpticalElement-97"><a href="#OpticalElement-97"><span class="linenos"> 97</span></a><span class="sd">                the optic&#39;s proper coordinate frame.</span>
</span><span id="OpticalElement-98"><a href="#OpticalElement-98"><span class="linenos"> 98</span></a>
</span><span id="OpticalElement-99"><a href="#OpticalElement-99"><span class="linenos"> 99</span></a><span class="sd">                What this &#39;majoraxis&#39; is for, e.g., the different kinds of mirrors, is illustrated</span>
</span><span id="OpticalElement-100"><a href="#OpticalElement-100"><span class="linenos">100</span></a><span class="sd">                in the documentation of the Mirror-classes.</span>
</span><span id="OpticalElement-101"><a href="#OpticalElement-101"><span class="linenos">101</span></a>
</span><span id="OpticalElement-102"><a href="#OpticalElement-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-103"><a href="#OpticalElement-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">Type</span>
</span><span id="OpticalElement-104"><a href="#OpticalElement-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">Position</span>
</span><span id="OpticalElement-105"><a href="#OpticalElement-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">Normal</span><span class="p">)</span>
</span><span id="OpticalElement-106"><a href="#OpticalElement-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">MajorAxis</span><span class="p">)</span>
</span><span id="OpticalElement-107"><a href="#OpticalElement-107"><span class="linenos">107</span></a>
</span><span id="OpticalElement-108"><a href="#OpticalElement-108"><span class="linenos">108</span></a>    <span class="c1"># using property decorator</span>
</span><span id="OpticalElement-109"><a href="#OpticalElement-109"><span class="linenos">109</span></a>    <span class="c1"># a getter function</span>
</span><span id="OpticalElement-110"><a href="#OpticalElement-110"><span class="linenos">110</span></a>    <span class="nd">@property</span>
</span><span id="OpticalElement-111"><a href="#OpticalElement-111"><span class="linenos">111</span></a>    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OpticalElement-112"><a href="#OpticalElement-112"><span class="linenos">112</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
</span><span id="OpticalElement-113"><a href="#OpticalElement-113"><span class="linenos">113</span></a>
</span><span id="OpticalElement-114"><a href="#OpticalElement-114"><span class="linenos">114</span></a>    <span class="c1"># a setter function</span>
</span><span id="OpticalElement-115"><a href="#OpticalElement-115"><span class="linenos">115</span></a>    <span class="nd">@position</span><span class="o">.</span><span class="n">setter</span>
</span><span id="OpticalElement-116"><a href="#OpticalElement-116"><span class="linenos">116</span></a>    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">NewPosition</span><span class="p">):</span>
</span><span id="OpticalElement-117"><a href="#OpticalElement-117"><span class="linenos">117</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewPosition</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">NewPosition</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="OpticalElement-118"><a href="#OpticalElement-118"><span class="linenos">118</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">NewPosition</span>
</span><span id="OpticalElement-119"><a href="#OpticalElement-119"><span class="linenos">119</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OpticalElement-120"><a href="#OpticalElement-120"><span class="linenos">120</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Position must be a 3D numpy.ndarray.&quot;</span><span class="p">)</span>
</span><span id="OpticalElement-121"><a href="#OpticalElement-121"><span class="linenos">121</span></a>
</span><span id="OpticalElement-122"><a href="#OpticalElement-122"><span class="linenos">122</span></a>    <span class="nd">@property</span>
</span><span id="OpticalElement-123"><a href="#OpticalElement-123"><span class="linenos">123</span></a>    <span class="k">def</span> <span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OpticalElement-124"><a href="#OpticalElement-124"><span class="linenos">124</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normal</span>
</span><span id="OpticalElement-125"><a href="#OpticalElement-125"><span class="linenos">125</span></a>
</span><span id="OpticalElement-126"><a href="#OpticalElement-126"><span class="linenos">126</span></a>    <span class="nd">@normal</span><span class="o">.</span><span class="n">setter</span>
</span><span id="OpticalElement-127"><a href="#OpticalElement-127"><span class="linenos">127</span></a>    <span class="k">def</span> <span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">NewNormal</span><span class="p">):</span>
</span><span id="OpticalElement-128"><a href="#OpticalElement-128"><span class="linenos">128</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewNormal</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">NewNormal</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">NewNormal</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="OpticalElement-129"><a href="#OpticalElement-129"><span class="linenos">129</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="OpticalElement-130"><a href="#OpticalElement-130"><span class="linenos">130</span></a>                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">NewNormal</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
</span><span id="OpticalElement-131"><a href="#OpticalElement-131"><span class="linenos">131</span></a>                    <span class="c1"># if the new normal is not perpendicular to the majoraxis, then we rotate the major along with the rotation of the normal vector</span>
</span><span id="OpticalElement-132"><a href="#OpticalElement-132"><span class="linenos">132</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span>
</span><span id="OpticalElement-133"><a href="#OpticalElement-133"><span class="linenos">133</span></a>                        <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">NewNormal</span><span class="p">),</span>
</span><span id="OpticalElement-134"><a href="#OpticalElement-134"><span class="linenos">134</span></a>                        <span class="n">mgeo</span><span class="o">.</span><span class="n">AngleBetweenTwoVectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">NewNormal</span><span class="p">),</span>
</span><span id="OpticalElement-135"><a href="#OpticalElement-135"><span class="linenos">135</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">,</span>
</span><span id="OpticalElement-136"><a href="#OpticalElement-136"><span class="linenos">136</span></a>                    <span class="p">)</span>
</span><span id="OpticalElement-137"><a href="#OpticalElement-137"><span class="linenos">137</span></a>            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="OpticalElement-138"><a href="#OpticalElement-138"><span class="linenos">138</span></a>                <span class="k">pass</span>  <span class="c1"># this is for the initialization when the majoraxis isn&#39;t defined yet and the test above fails</span>
</span><span id="OpticalElement-139"><a href="#OpticalElement-139"><span class="linenos">139</span></a>
</span><span id="OpticalElement-140"><a href="#OpticalElement-140"><span class="linenos">140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">NewNormal</span><span class="p">)</span>
</span><span id="OpticalElement-141"><a href="#OpticalElement-141"><span class="linenos">141</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OpticalElement-142"><a href="#OpticalElement-142"><span class="linenos">142</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Normal must be a 3D numpy.ndarray with finite length.&quot;</span><span class="p">)</span>
</span><span id="OpticalElement-143"><a href="#OpticalElement-143"><span class="linenos">143</span></a>
</span><span id="OpticalElement-144"><a href="#OpticalElement-144"><span class="linenos">144</span></a>    <span class="nd">@property</span>
</span><span id="OpticalElement-145"><a href="#OpticalElement-145"><span class="linenos">145</span></a>    <span class="k">def</span> <span class="nf">majoraxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OpticalElement-146"><a href="#OpticalElement-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_majoraxis</span>
</span><span id="OpticalElement-147"><a href="#OpticalElement-147"><span class="linenos">147</span></a>
</span><span id="OpticalElement-148"><a href="#OpticalElement-148"><span class="linenos">148</span></a>    <span class="nd">@majoraxis</span><span class="o">.</span><span class="n">setter</span>
</span><span id="OpticalElement-149"><a href="#OpticalElement-149"><span class="linenos">149</span></a>    <span class="k">def</span> <span class="nf">majoraxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">NewMajorAxis</span><span class="p">):</span>
</span><span id="OpticalElement-150"><a href="#OpticalElement-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NewMajorAxis</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">NewMajorAxis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">NewMajorAxis</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="OpticalElement-151"><a href="#OpticalElement-151"><span class="linenos">151</span></a>            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">NewMajorAxis</span><span class="p">)))</span> <span class="o">&gt;</span> <span class="mf">1e-12</span><span class="p">:</span>
</span><span id="OpticalElement-152"><a href="#OpticalElement-152"><span class="linenos">152</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The normal and major axis of optical elements need to be orthogonal!&quot;</span><span class="p">)</span>
</span><span id="OpticalElement-153"><a href="#OpticalElement-153"><span class="linenos">153</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">NewMajorAxis</span><span class="p">)</span>
</span><span id="OpticalElement-154"><a href="#OpticalElement-154"><span class="linenos">154</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OpticalElement-155"><a href="#OpticalElement-155"><span class="linenos">155</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;MajorAxis must be a 3D numpy.ndarray with finite length.&quot;</span><span class="p">)</span>
</span><span id="OpticalElement-156"><a href="#OpticalElement-156"><span class="linenos">156</span></a>
</span><span id="OpticalElement-157"><a href="#OpticalElement-157"><span class="linenos">157</span></a>    <span class="c1"># make the type property private and providing only a getter method, so it can&#39;t be modified after the class instance has been created</span>
</span><span id="OpticalElement-158"><a href="#OpticalElement-158"><span class="linenos">158</span></a>    <span class="nd">@property</span>
</span><span id="OpticalElement-159"><a href="#OpticalElement-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OpticalElement-160"><a href="#OpticalElement-160"><span class="linenos">160</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
</span><span id="OpticalElement-161"><a href="#OpticalElement-161"><span class="linenos">161</span></a>
</span><span id="OpticalElement-162"><a href="#OpticalElement-162"><span class="linenos">162</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OpticalElement-163"><a href="#OpticalElement-163"><span class="linenos">163</span></a>        <span class="n">position_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="OpticalElement-164"><a href="#OpticalElement-164"><span class="linenos">164</span></a>        <span class="n">normal_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="OpticalElement-165"><a href="#OpticalElement-165"><span class="linenos">165</span></a>        <span class="n">majoraxis_tuple</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="OpticalElement-166"><a href="#OpticalElement-166"><span class="linenos">166</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="n">position_tuple</span> <span class="o">+</span> <span class="n">normal_tuple</span> <span class="o">+</span> <span class="n">majoraxis_tuple</span><span class="p">)</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="OpticalElement-167"><a href="#OpticalElement-167"><span class="linenos">167</span></a>
</span><span id="OpticalElement-168"><a href="#OpticalElement-168"><span class="linenos">168</span></a>    <span class="c1"># %% methods to (mis-)align the OE</span>
</span><span id="OpticalElement-169"><a href="#OpticalElement-169"><span class="linenos">169</span></a>
</span><span id="OpticalElement-170"><a href="#OpticalElement-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">rotate_pitch_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement-171"><a href="#OpticalElement-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-172"><a href="#OpticalElement-172"><span class="linenos">172</span></a><span class="sd">        Pitch rotation, i.e. rotates the optical element about the axis (&#39;normal&#39; x &#39;majraxis&#39;), by the</span>
</span><span id="OpticalElement-173"><a href="#OpticalElement-173"><span class="linenos">173</span></a><span class="sd">        given angle.</span>
</span><span id="OpticalElement-174"><a href="#OpticalElement-174"><span class="linenos">174</span></a><span class="sd">        If the plane spanned by &#39;normal&#39; and &#39;majoraxis&#39; is the incidence plane (normally the case</span>
</span><span id="OpticalElement-175"><a href="#OpticalElement-175"><span class="linenos">175</span></a><span class="sd">        in a &quot;clean alignment&quot; situation for pure p or s polarization), then this is simply a modificaiton</span>
</span><span id="OpticalElement-176"><a href="#OpticalElement-176"><span class="linenos">176</span></a><span class="sd">        of the incidence angle by &quot;angle&quot;. But in general, if the optical element has some odd orientation,</span>
</span><span id="OpticalElement-177"><a href="#OpticalElement-177"><span class="linenos">177</span></a><span class="sd">        there is not a direct correspondence.</span>
</span><span id="OpticalElement-178"><a href="#OpticalElement-178"><span class="linenos">178</span></a>
</span><span id="OpticalElement-179"><a href="#OpticalElement-179"><span class="linenos">179</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-180"><a href="#OpticalElement-180"><span class="linenos">180</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-181"><a href="#OpticalElement-181"><span class="linenos">181</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement-182"><a href="#OpticalElement-182"><span class="linenos">182</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement-183"><a href="#OpticalElement-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-184"><a href="#OpticalElement-184"><span class="linenos">184</span></a>        <span class="n">rotation_axis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">)</span>
</span><span id="OpticalElement-185"><a href="#OpticalElement-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="n">rotation_axis</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="OpticalElement-186"><a href="#OpticalElement-186"><span class="linenos">186</span></a>        <span class="c1"># the normal.setter function should take care of the majoraxis remaining perpendicular to the normal.</span>
</span><span id="OpticalElement-187"><a href="#OpticalElement-187"><span class="linenos">187</span></a>
</span><span id="OpticalElement-188"><a href="#OpticalElement-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">rotate_roll_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement-189"><a href="#OpticalElement-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-190"><a href="#OpticalElement-190"><span class="linenos">190</span></a><span class="sd">        Roll rotation, i.e. rotates the optical element about its &#39;majoraxis&#39; by the given angle.</span>
</span><span id="OpticalElement-191"><a href="#OpticalElement-191"><span class="linenos">191</span></a>
</span><span id="OpticalElement-192"><a href="#OpticalElement-192"><span class="linenos">192</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-193"><a href="#OpticalElement-193"><span class="linenos">193</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-194"><a href="#OpticalElement-194"><span class="linenos">194</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement-195"><a href="#OpticalElement-195"><span class="linenos">195</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement-196"><a href="#OpticalElement-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-197"><a href="#OpticalElement-197"><span class="linenos">197</span></a>
</span><span id="OpticalElement-198"><a href="#OpticalElement-198"><span class="linenos">198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="OpticalElement-199"><a href="#OpticalElement-199"><span class="linenos">199</span></a>
</span><span id="OpticalElement-200"><a href="#OpticalElement-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">rotate_yaw_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement-201"><a href="#OpticalElement-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-202"><a href="#OpticalElement-202"><span class="linenos">202</span></a><span class="sd">        Yaw rotation, i.e. rotates the optical element about its &#39;normal&#39; by the given angle.</span>
</span><span id="OpticalElement-203"><a href="#OpticalElement-203"><span class="linenos">203</span></a>
</span><span id="OpticalElement-204"><a href="#OpticalElement-204"><span class="linenos">204</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-205"><a href="#OpticalElement-205"><span class="linenos">205</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-206"><a href="#OpticalElement-206"><span class="linenos">206</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement-207"><a href="#OpticalElement-207"><span class="linenos">207</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement-208"><a href="#OpticalElement-208"><span class="linenos">208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-209"><a href="#OpticalElement-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">)</span>
</span><span id="OpticalElement-210"><a href="#OpticalElement-210"><span class="linenos">210</span></a>
</span><span id="OpticalElement-211"><a href="#OpticalElement-211"><span class="linenos">211</span></a>    <span class="k">def</span> <span class="nf">rotate_random_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement-212"><a href="#OpticalElement-212"><span class="linenos">212</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-213"><a href="#OpticalElement-213"><span class="linenos">213</span></a><span class="sd">        Rotates the optical element about a randomly oriented axis by the given angle.</span>
</span><span id="OpticalElement-214"><a href="#OpticalElement-214"><span class="linenos">214</span></a>
</span><span id="OpticalElement-215"><a href="#OpticalElement-215"><span class="linenos">215</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-216"><a href="#OpticalElement-216"><span class="linenos">216</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-217"><a href="#OpticalElement-217"><span class="linenos">217</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement-218"><a href="#OpticalElement-218"><span class="linenos">218</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement-219"><a href="#OpticalElement-219"><span class="linenos">219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-220"><a href="#OpticalElement-220"><span class="linenos">220</span></a>
</span><span id="OpticalElement-221"><a href="#OpticalElement-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="OpticalElement-222"><a href="#OpticalElement-222"><span class="linenos">222</span></a>
</span><span id="OpticalElement-223"><a href="#OpticalElement-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">shift_along_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement-224"><a href="#OpticalElement-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-225"><a href="#OpticalElement-225"><span class="linenos">225</span></a><span class="sd">        Shifts the optical element along its &#39;normal&#39; by the given distance.</span>
</span><span id="OpticalElement-226"><a href="#OpticalElement-226"><span class="linenos">226</span></a>
</span><span id="OpticalElement-227"><a href="#OpticalElement-227"><span class="linenos">227</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-228"><a href="#OpticalElement-228"><span class="linenos">228</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-229"><a href="#OpticalElement-229"><span class="linenos">229</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement-230"><a href="#OpticalElement-230"><span class="linenos">230</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement-231"><a href="#OpticalElement-231"><span class="linenos">231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-232"><a href="#OpticalElement-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>
</span><span id="OpticalElement-233"><a href="#OpticalElement-233"><span class="linenos">233</span></a>
</span><span id="OpticalElement-234"><a href="#OpticalElement-234"><span class="linenos">234</span></a>    <span class="k">def</span> <span class="nf">shift_along_major</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement-235"><a href="#OpticalElement-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-236"><a href="#OpticalElement-236"><span class="linenos">236</span></a><span class="sd">        Shifts the optical element along its &#39;majoraxis&#39; by the given distance.</span>
</span><span id="OpticalElement-237"><a href="#OpticalElement-237"><span class="linenos">237</span></a>
</span><span id="OpticalElement-238"><a href="#OpticalElement-238"><span class="linenos">238</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-239"><a href="#OpticalElement-239"><span class="linenos">239</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-240"><a href="#OpticalElement-240"><span class="linenos">240</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement-241"><a href="#OpticalElement-241"><span class="linenos">241</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement-242"><a href="#OpticalElement-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-243"><a href="#OpticalElement-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span>
</span><span id="OpticalElement-244"><a href="#OpticalElement-244"><span class="linenos">244</span></a>
</span><span id="OpticalElement-245"><a href="#OpticalElement-245"><span class="linenos">245</span></a>    <span class="k">def</span> <span class="nf">shift_along_cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement-246"><a href="#OpticalElement-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-247"><a href="#OpticalElement-247"><span class="linenos">247</span></a><span class="sd">        Shifts the optical element along the axis &#39;normal&#39;x&#39;majoraxis&#39;</span>
</span><span id="OpticalElement-248"><a href="#OpticalElement-248"><span class="linenos">248</span></a><span class="sd">        (typically normal to the light incidence plane) by the given distance.</span>
</span><span id="OpticalElement-249"><a href="#OpticalElement-249"><span class="linenos">249</span></a>
</span><span id="OpticalElement-250"><a href="#OpticalElement-250"><span class="linenos">250</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-251"><a href="#OpticalElement-251"><span class="linenos">251</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-252"><a href="#OpticalElement-252"><span class="linenos">252</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement-253"><a href="#OpticalElement-253"><span class="linenos">253</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement-254"><a href="#OpticalElement-254"><span class="linenos">254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-255"><a href="#OpticalElement-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">))</span>
</span><span id="OpticalElement-256"><a href="#OpticalElement-256"><span class="linenos">256</span></a>
</span><span id="OpticalElement-257"><a href="#OpticalElement-257"><span class="linenos">257</span></a>    <span class="k">def</span> <span class="nf">shift_along_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement-258"><a href="#OpticalElement-258"><span class="linenos">258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement-259"><a href="#OpticalElement-259"><span class="linenos">259</span></a><span class="sd">        Shifts the optical element along a random direction by the given distance.</span>
</span><span id="OpticalElement-260"><a href="#OpticalElement-260"><span class="linenos">260</span></a>
</span><span id="OpticalElement-261"><a href="#OpticalElement-261"><span class="linenos">261</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement-262"><a href="#OpticalElement-262"><span class="linenos">262</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement-263"><a href="#OpticalElement-263"><span class="linenos">263</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement-264"><a href="#OpticalElement-264"><span class="linenos">264</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement-265"><a href="#OpticalElement-265"><span class="linenos">265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement-266"><a href="#OpticalElement-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>An optical element, to define the position and orientation of different optics in the 'lab-frame'.</p>

<h2 id="attributes">Attributes</h2>

<pre><code>type : An instance of a class of optic, i.e. a Mirror and Mask.

position : np.ndarray
    Coordinate vector of the optical element’s center point in the lab frame.
    What this center is, depends on the 'type', but it is generally the center of symmetry
    of the Support of the optic. It is marked by the point 'P' in the drawings in the
    documentation of the Mirror-classes for example.

normal : np.ndarray
    Lab-frame vector pointing against the direction that would be considered
    as normal incidence on the optical element.

majoraxis : np.ndarray
    Lab-frame vector of another distinguished axis of non-rotationally symmetric optics,
    like the major axes of toroidal/elliptical mirrors or the off-axis direction of
    off-axis parabolas. This fixes the optical element’s rotation about 'normal'.
    It is required to be perpendicular to 'normal', and is usually the x-axis in the
    optic's proper coordinate frame.

    What this 'majoraxis' is, e.g. for the different kinds of mirrors, is illustrated
    in the documentation of the Mirror-classes.

    For pure p or s polarization, the light incidence plane should be the
    plane spanned by 'normal' and 'majoraxis', so that the incidence angle is varied
    by rotating the optical element around the cross product 'normal' x 'majoraxis'.
</code></pre>

<h2 id="methods">Methods</h2>

<pre><code>rotate_pitch_by(angle)

rotate_roll_by(angle)

rotate_yaw_by(angle)

rotate_random_by(angle)

shift_along_normal(distance)

shift_along_major(distance)

shift_along_cross(distance)

shift_along_random(distance)
</code></pre>
</div>


                            <div id="OpticalElement.__init__" class="classattr">
                                        <input id="OpticalElement.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OpticalElement</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">Type</span>, </span><span class="param"><span class="n">Position</span>, </span><span class="param"><span class="n">Normal</span>, </span><span class="param"><span class="n">MajorAxis</span></span>)</span>

                <label class="view-source-button" for="OpticalElement.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.__init__"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.__init__-77"><a href="#OpticalElement.__init__-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Position</span><span class="p">,</span> <span class="n">Normal</span><span class="p">,</span> <span class="n">MajorAxis</span><span class="p">):</span>
</span><span id="OpticalElement.__init__-78"><a href="#OpticalElement.__init__-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.__init__-79"><a href="#OpticalElement.__init__-79"><span class="linenos"> 79</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.__init__-80"><a href="#OpticalElement.__init__-80"><span class="linenos"> 80</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.__init__-81"><a href="#OpticalElement.__init__-81"><span class="linenos"> 81</span></a><span class="sd">            Type : Object of a Mirror or Mask-class</span>
</span><span id="OpticalElement.__init__-82"><a href="#OpticalElement.__init__-82"><span class="linenos"> 82</span></a>
</span><span id="OpticalElement.__init__-83"><a href="#OpticalElement.__init__-83"><span class="linenos"> 83</span></a><span class="sd">            Position : np.ndarray</span>
</span><span id="OpticalElement.__init__-84"><a href="#OpticalElement.__init__-84"><span class="linenos"> 84</span></a><span class="sd">                Coordinate vector of the optical element’s center point in the lab frame.</span>
</span><span id="OpticalElement.__init__-85"><a href="#OpticalElement.__init__-85"><span class="linenos"> 85</span></a><span class="sd">                What this center is, depends on the &#39;type&#39;, but it is generally the center of symmetry</span>
</span><span id="OpticalElement.__init__-86"><a href="#OpticalElement.__init__-86"><span class="linenos"> 86</span></a><span class="sd">                of the Support of the optic. It is marked by the point &#39;P&#39; in the drawings in the</span>
</span><span id="OpticalElement.__init__-87"><a href="#OpticalElement.__init__-87"><span class="linenos"> 87</span></a><span class="sd">                documentation of the Mirror-classes for example.</span>
</span><span id="OpticalElement.__init__-88"><a href="#OpticalElement.__init__-88"><span class="linenos"> 88</span></a>
</span><span id="OpticalElement.__init__-89"><a href="#OpticalElement.__init__-89"><span class="linenos"> 89</span></a><span class="sd">            Normal : np.ndarray</span>
</span><span id="OpticalElement.__init__-90"><a href="#OpticalElement.__init__-90"><span class="linenos"> 90</span></a><span class="sd">                Lab-frame vector pointing against the direction that would be considered</span>
</span><span id="OpticalElement.__init__-91"><a href="#OpticalElement.__init__-91"><span class="linenos"> 91</span></a><span class="sd">                as normal incidence on the optical element.</span>
</span><span id="OpticalElement.__init__-92"><a href="#OpticalElement.__init__-92"><span class="linenos"> 92</span></a>
</span><span id="OpticalElement.__init__-93"><a href="#OpticalElement.__init__-93"><span class="linenos"> 93</span></a><span class="sd">            MajorAxis : np.ndarray</span>
</span><span id="OpticalElement.__init__-94"><a href="#OpticalElement.__init__-94"><span class="linenos"> 94</span></a><span class="sd">                Lab-frame vector of another distinguished axis, of non-rotationally symmetric elements,</span>
</span><span id="OpticalElement.__init__-95"><a href="#OpticalElement.__init__-95"><span class="linenos"> 95</span></a><span class="sd">                like the major axes of toroidal/elliptical mirrors or the off-axis direction of off-axis</span>
</span><span id="OpticalElement.__init__-96"><a href="#OpticalElement.__init__-96"><span class="linenos"> 96</span></a><span class="sd">                parabolas. It is required to be perpendicular to &#39;normal&#39;, and is usually the x-axis in</span>
</span><span id="OpticalElement.__init__-97"><a href="#OpticalElement.__init__-97"><span class="linenos"> 97</span></a><span class="sd">                the optic&#39;s proper coordinate frame.</span>
</span><span id="OpticalElement.__init__-98"><a href="#OpticalElement.__init__-98"><span class="linenos"> 98</span></a>
</span><span id="OpticalElement.__init__-99"><a href="#OpticalElement.__init__-99"><span class="linenos"> 99</span></a><span class="sd">                What this &#39;majoraxis&#39; is for, e.g., the different kinds of mirrors, is illustrated</span>
</span><span id="OpticalElement.__init__-100"><a href="#OpticalElement.__init__-100"><span class="linenos">100</span></a><span class="sd">                in the documentation of the Mirror-classes.</span>
</span><span id="OpticalElement.__init__-101"><a href="#OpticalElement.__init__-101"><span class="linenos">101</span></a>
</span><span id="OpticalElement.__init__-102"><a href="#OpticalElement.__init__-102"><span class="linenos">102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.__init__-103"><a href="#OpticalElement.__init__-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">Type</span>
</span><span id="OpticalElement.__init__-104"><a href="#OpticalElement.__init__-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">Position</span>
</span><span id="OpticalElement.__init__-105"><a href="#OpticalElement.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">Normal</span><span class="p">)</span>
</span><span id="OpticalElement.__init__-106"><a href="#OpticalElement.__init__-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">MajorAxis</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><h2 id="parameters">Parameters</h2>

<pre><code>Type : Object of a Mirror or Mask-class

Position : np.ndarray
    Coordinate vector of the optical element’s center point in the lab frame.
    What this center is, depends on the 'type', but it is generally the center of symmetry
    of the Support of the optic. It is marked by the point 'P' in the drawings in the
    documentation of the Mirror-classes for example.

Normal : np.ndarray
    Lab-frame vector pointing against the direction that would be considered
    as normal incidence on the optical element.

MajorAxis : np.ndarray
    Lab-frame vector of another distinguished axis, of non-rotationally symmetric elements,
    like the major axes of toroidal/elliptical mirrors or the off-axis direction of off-axis
    parabolas. It is required to be perpendicular to 'normal', and is usually the x-axis in
    the optic's proper coordinate frame.

    What this 'majoraxis' is for, e.g., the different kinds of mirrors, is illustrated
    in the documentation of the Mirror-classes.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.rotate_pitch_by" class="classattr">
                                        <input id="OpticalElement.rotate_pitch_by-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rotate_pitch_by</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.rotate_pitch_by-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.rotate_pitch_by"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.rotate_pitch_by-170"><a href="#OpticalElement.rotate_pitch_by-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">rotate_pitch_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement.rotate_pitch_by-171"><a href="#OpticalElement.rotate_pitch_by-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_pitch_by-172"><a href="#OpticalElement.rotate_pitch_by-172"><span class="linenos">172</span></a><span class="sd">        Pitch rotation, i.e. rotates the optical element about the axis (&#39;normal&#39; x &#39;majraxis&#39;), by the</span>
</span><span id="OpticalElement.rotate_pitch_by-173"><a href="#OpticalElement.rotate_pitch_by-173"><span class="linenos">173</span></a><span class="sd">        given angle.</span>
</span><span id="OpticalElement.rotate_pitch_by-174"><a href="#OpticalElement.rotate_pitch_by-174"><span class="linenos">174</span></a><span class="sd">        If the plane spanned by &#39;normal&#39; and &#39;majoraxis&#39; is the incidence plane (normally the case</span>
</span><span id="OpticalElement.rotate_pitch_by-175"><a href="#OpticalElement.rotate_pitch_by-175"><span class="linenos">175</span></a><span class="sd">        in a &quot;clean alignment&quot; situation for pure p or s polarization), then this is simply a modificaiton</span>
</span><span id="OpticalElement.rotate_pitch_by-176"><a href="#OpticalElement.rotate_pitch_by-176"><span class="linenos">176</span></a><span class="sd">        of the incidence angle by &quot;angle&quot;. But in general, if the optical element has some odd orientation,</span>
</span><span id="OpticalElement.rotate_pitch_by-177"><a href="#OpticalElement.rotate_pitch_by-177"><span class="linenos">177</span></a><span class="sd">        there is not a direct correspondence.</span>
</span><span id="OpticalElement.rotate_pitch_by-178"><a href="#OpticalElement.rotate_pitch_by-178"><span class="linenos">178</span></a>
</span><span id="OpticalElement.rotate_pitch_by-179"><a href="#OpticalElement.rotate_pitch_by-179"><span class="linenos">179</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.rotate_pitch_by-180"><a href="#OpticalElement.rotate_pitch_by-180"><span class="linenos">180</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.rotate_pitch_by-181"><a href="#OpticalElement.rotate_pitch_by-181"><span class="linenos">181</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement.rotate_pitch_by-182"><a href="#OpticalElement.rotate_pitch_by-182"><span class="linenos">182</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement.rotate_pitch_by-183"><a href="#OpticalElement.rotate_pitch_by-183"><span class="linenos">183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_pitch_by-184"><a href="#OpticalElement.rotate_pitch_by-184"><span class="linenos">184</span></a>        <span class="n">rotation_axis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">)</span>
</span><span id="OpticalElement.rotate_pitch_by-185"><a href="#OpticalElement.rotate_pitch_by-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="n">rotation_axis</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span><span id="OpticalElement.rotate_pitch_by-186"><a href="#OpticalElement.rotate_pitch_by-186"><span class="linenos">186</span></a>        <span class="c1"># the normal.setter function should take care of the majoraxis remaining perpendicular to the normal.</span>
</span></pre></div>


            <div class="docstring"><p>Pitch rotation, i.e. rotates the optical element about the axis ('normal' x 'majraxis'), by the
given angle.
If the plane spanned by 'normal' and 'majoraxis' is the incidence plane (normally the case
in a "clean alignment" situation for pure p or s polarization), then this is simply a modificaiton
of the incidence angle by "angle". But in general, if the optical element has some odd orientation,
there is not a direct correspondence.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>angle : float
    Rotation angle in *degrees*.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.rotate_roll_by" class="classattr">
                                        <input id="OpticalElement.rotate_roll_by-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rotate_roll_by</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.rotate_roll_by-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.rotate_roll_by"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.rotate_roll_by-188"><a href="#OpticalElement.rotate_roll_by-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">rotate_roll_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement.rotate_roll_by-189"><a href="#OpticalElement.rotate_roll_by-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_roll_by-190"><a href="#OpticalElement.rotate_roll_by-190"><span class="linenos">190</span></a><span class="sd">        Roll rotation, i.e. rotates the optical element about its &#39;majoraxis&#39; by the given angle.</span>
</span><span id="OpticalElement.rotate_roll_by-191"><a href="#OpticalElement.rotate_roll_by-191"><span class="linenos">191</span></a>
</span><span id="OpticalElement.rotate_roll_by-192"><a href="#OpticalElement.rotate_roll_by-192"><span class="linenos">192</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.rotate_roll_by-193"><a href="#OpticalElement.rotate_roll_by-193"><span class="linenos">193</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.rotate_roll_by-194"><a href="#OpticalElement.rotate_roll_by-194"><span class="linenos">194</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement.rotate_roll_by-195"><a href="#OpticalElement.rotate_roll_by-195"><span class="linenos">195</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement.rotate_roll_by-196"><a href="#OpticalElement.rotate_roll_by-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_roll_by-197"><a href="#OpticalElement.rotate_roll_by-197"><span class="linenos">197</span></a>
</span><span id="OpticalElement.rotate_roll_by-198"><a href="#OpticalElement.rotate_roll_by-198"><span class="linenos">198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Roll rotation, i.e. rotates the optical element about its 'majoraxis' by the given angle.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>angle : float
    Rotation angle in *degrees*.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.rotate_yaw_by" class="classattr">
                                        <input id="OpticalElement.rotate_yaw_by-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rotate_yaw_by</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.rotate_yaw_by-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.rotate_yaw_by"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.rotate_yaw_by-200"><a href="#OpticalElement.rotate_yaw_by-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">rotate_yaw_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement.rotate_yaw_by-201"><a href="#OpticalElement.rotate_yaw_by-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_yaw_by-202"><a href="#OpticalElement.rotate_yaw_by-202"><span class="linenos">202</span></a><span class="sd">        Yaw rotation, i.e. rotates the optical element about its &#39;normal&#39; by the given angle.</span>
</span><span id="OpticalElement.rotate_yaw_by-203"><a href="#OpticalElement.rotate_yaw_by-203"><span class="linenos">203</span></a>
</span><span id="OpticalElement.rotate_yaw_by-204"><a href="#OpticalElement.rotate_yaw_by-204"><span class="linenos">204</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.rotate_yaw_by-205"><a href="#OpticalElement.rotate_yaw_by-205"><span class="linenos">205</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.rotate_yaw_by-206"><a href="#OpticalElement.rotate_yaw_by-206"><span class="linenos">206</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement.rotate_yaw_by-207"><a href="#OpticalElement.rotate_yaw_by-207"><span class="linenos">207</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement.rotate_yaw_by-208"><a href="#OpticalElement.rotate_yaw_by-208"><span class="linenos">208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_yaw_by-209"><a href="#OpticalElement.rotate_yaw_by-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yaw rotation, i.e. rotates the optical element about its 'normal' by the given angle.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>angle : float
    Rotation angle in *degrees*.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.rotate_random_by" class="classattr">
                                        <input id="OpticalElement.rotate_random_by-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rotate_random_by</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.rotate_random_by-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.rotate_random_by"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.rotate_random_by-211"><a href="#OpticalElement.rotate_random_by-211"><span class="linenos">211</span></a>    <span class="k">def</span> <span class="nf">rotate_random_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="OpticalElement.rotate_random_by-212"><a href="#OpticalElement.rotate_random_by-212"><span class="linenos">212</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_random_by-213"><a href="#OpticalElement.rotate_random_by-213"><span class="linenos">213</span></a><span class="sd">        Rotates the optical element about a randomly oriented axis by the given angle.</span>
</span><span id="OpticalElement.rotate_random_by-214"><a href="#OpticalElement.rotate_random_by-214"><span class="linenos">214</span></a>
</span><span id="OpticalElement.rotate_random_by-215"><a href="#OpticalElement.rotate_random_by-215"><span class="linenos">215</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.rotate_random_by-216"><a href="#OpticalElement.rotate_random_by-216"><span class="linenos">216</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.rotate_random_by-217"><a href="#OpticalElement.rotate_random_by-217"><span class="linenos">217</span></a><span class="sd">            angle : float</span>
</span><span id="OpticalElement.rotate_random_by-218"><a href="#OpticalElement.rotate_random_by-218"><span class="linenos">218</span></a><span class="sd">                Rotation angle in *degrees*.</span>
</span><span id="OpticalElement.rotate_random_by-219"><a href="#OpticalElement.rotate_random_by-219"><span class="linenos">219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.rotate_random_by-220"><a href="#OpticalElement.rotate_random_by-220"><span class="linenos">220</span></a>
</span><span id="OpticalElement.rotate_random_by-221"><a href="#OpticalElement.rotate_random_by-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">RotationAroundAxis</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Rotates the optical element about a randomly oriented axis by the given angle.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>angle : float
    Rotation angle in *degrees*.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.shift_along_normal" class="classattr">
                                        <input id="OpticalElement.shift_along_normal-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shift_along_normal</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">distance</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.shift_along_normal-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.shift_along_normal"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.shift_along_normal-223"><a href="#OpticalElement.shift_along_normal-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">shift_along_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement.shift_along_normal-224"><a href="#OpticalElement.shift_along_normal-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_normal-225"><a href="#OpticalElement.shift_along_normal-225"><span class="linenos">225</span></a><span class="sd">        Shifts the optical element along its &#39;normal&#39; by the given distance.</span>
</span><span id="OpticalElement.shift_along_normal-226"><a href="#OpticalElement.shift_along_normal-226"><span class="linenos">226</span></a>
</span><span id="OpticalElement.shift_along_normal-227"><a href="#OpticalElement.shift_along_normal-227"><span class="linenos">227</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.shift_along_normal-228"><a href="#OpticalElement.shift_along_normal-228"><span class="linenos">228</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.shift_along_normal-229"><a href="#OpticalElement.shift_along_normal-229"><span class="linenos">229</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement.shift_along_normal-230"><a href="#OpticalElement.shift_along_normal-230"><span class="linenos">230</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement.shift_along_normal-231"><a href="#OpticalElement.shift_along_normal-231"><span class="linenos">231</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_normal-232"><a href="#OpticalElement.shift_along_normal-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span>
</span></pre></div>


            <div class="docstring"><p>Shifts the optical element along its 'normal' by the given distance.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>distance : float
    Shift distance in mm.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.shift_along_major" class="classattr">
                                        <input id="OpticalElement.shift_along_major-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shift_along_major</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">distance</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.shift_along_major-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.shift_along_major"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.shift_along_major-234"><a href="#OpticalElement.shift_along_major-234"><span class="linenos">234</span></a>    <span class="k">def</span> <span class="nf">shift_along_major</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement.shift_along_major-235"><a href="#OpticalElement.shift_along_major-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_major-236"><a href="#OpticalElement.shift_along_major-236"><span class="linenos">236</span></a><span class="sd">        Shifts the optical element along its &#39;majoraxis&#39; by the given distance.</span>
</span><span id="OpticalElement.shift_along_major-237"><a href="#OpticalElement.shift_along_major-237"><span class="linenos">237</span></a>
</span><span id="OpticalElement.shift_along_major-238"><a href="#OpticalElement.shift_along_major-238"><span class="linenos">238</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.shift_along_major-239"><a href="#OpticalElement.shift_along_major-239"><span class="linenos">239</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.shift_along_major-240"><a href="#OpticalElement.shift_along_major-240"><span class="linenos">240</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement.shift_along_major-241"><a href="#OpticalElement.shift_along_major-241"><span class="linenos">241</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement.shift_along_major-242"><a href="#OpticalElement.shift_along_major-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_major-243"><a href="#OpticalElement.shift_along_major-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span>
</span></pre></div>


            <div class="docstring"><p>Shifts the optical element along its 'majoraxis' by the given distance.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>distance : float
    Shift distance in mm.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.shift_along_cross" class="classattr">
                                        <input id="OpticalElement.shift_along_cross-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shift_along_cross</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">distance</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.shift_along_cross-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.shift_along_cross"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.shift_along_cross-245"><a href="#OpticalElement.shift_along_cross-245"><span class="linenos">245</span></a>    <span class="k">def</span> <span class="nf">shift_along_cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement.shift_along_cross-246"><a href="#OpticalElement.shift_along_cross-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_cross-247"><a href="#OpticalElement.shift_along_cross-247"><span class="linenos">247</span></a><span class="sd">        Shifts the optical element along the axis &#39;normal&#39;x&#39;majoraxis&#39;</span>
</span><span id="OpticalElement.shift_along_cross-248"><a href="#OpticalElement.shift_along_cross-248"><span class="linenos">248</span></a><span class="sd">        (typically normal to the light incidence plane) by the given distance.</span>
</span><span id="OpticalElement.shift_along_cross-249"><a href="#OpticalElement.shift_along_cross-249"><span class="linenos">249</span></a>
</span><span id="OpticalElement.shift_along_cross-250"><a href="#OpticalElement.shift_along_cross-250"><span class="linenos">250</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.shift_along_cross-251"><a href="#OpticalElement.shift_along_cross-251"><span class="linenos">251</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.shift_along_cross-252"><a href="#OpticalElement.shift_along_cross-252"><span class="linenos">252</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement.shift_along_cross-253"><a href="#OpticalElement.shift_along_cross-253"><span class="linenos">253</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement.shift_along_cross-254"><a href="#OpticalElement.shift_along_cross-254"><span class="linenos">254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_cross-255"><a href="#OpticalElement.shift_along_cross-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">majoraxis</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Shifts the optical element along the axis 'normal'x'majoraxis'
(typically normal to the light incidence plane) by the given distance.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>distance : float
    Shift distance in mm.
</code></pre>
</div>


                            </div>
                            <div id="OpticalElement.shift_along_random" class="classattr">
                                        <input id="OpticalElement.shift_along_random-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shift_along_random</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">distance</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OpticalElement.shift_along_random-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpticalElement.shift_along_random"></a>
            <div class="chroma pdoc-code"><pre><span></span><span id="OpticalElement.shift_along_random-257"><a href="#OpticalElement.shift_along_random-257"><span class="linenos">257</span></a>    <span class="k">def</span> <span class="nf">shift_along_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
</span><span id="OpticalElement.shift_along_random-258"><a href="#OpticalElement.shift_along_random-258"><span class="linenos">258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_random-259"><a href="#OpticalElement.shift_along_random-259"><span class="linenos">259</span></a><span class="sd">        Shifts the optical element along a random direction by the given distance.</span>
</span><span id="OpticalElement.shift_along_random-260"><a href="#OpticalElement.shift_along_random-260"><span class="linenos">260</span></a>
</span><span id="OpticalElement.shift_along_random-261"><a href="#OpticalElement.shift_along_random-261"><span class="linenos">261</span></a><span class="sd">        Parameters</span>
</span><span id="OpticalElement.shift_along_random-262"><a href="#OpticalElement.shift_along_random-262"><span class="linenos">262</span></a><span class="sd">        ----------</span>
</span><span id="OpticalElement.shift_along_random-263"><a href="#OpticalElement.shift_along_random-263"><span class="linenos">263</span></a><span class="sd">            distance : float</span>
</span><span id="OpticalElement.shift_along_random-264"><a href="#OpticalElement.shift_along_random-264"><span class="linenos">264</span></a><span class="sd">                Shift distance in mm.</span>
</span><span id="OpticalElement.shift_along_random-265"><a href="#OpticalElement.shift_along_random-265"><span class="linenos">265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OpticalElement.shift_along_random-266"><a href="#OpticalElement.shift_along_random-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">mgeo</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Shifts the optical element along a random direction by the given distance.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>distance : float
    Shift distance in mm.
</code></pre>
</div>


                            </div>
                </section>
</div>


<style>pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
<style>:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
<style>.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>